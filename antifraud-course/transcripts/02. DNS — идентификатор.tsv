start	end	text
200	2000	Приветствую, с вами Вектор Т13.
2580	5480	В этом уроке мы поговорим с вами о DNS.
6220	10080	И несмотря на то, что возможно вам покажется эта тема довольно скучной,
10160	13060	и вам захочется перелеснуть на следующий урок,
13360	14900	я прошу вас остановиться.
15460	22680	Дело в том, что DNS сам по себе важен абсолютно равносильно столько же,
22840	25160	сколько и важен ваш реальный IP-адрес.
25660	29320	И представим себе, что DNS и IP-адрес это костюм,
29320	33440	вы же не будете одевать отдельно пиджак, при этом не надев брюки.
34040	35960	Точно так же и в работе с DNS.
36840	40520	В этом уроке я расскажу вам, как правильно с ним работать,
40920	45200	и почему вы всегда до этого делали это неправильно.
45420	46540	Итак, приступаем.
47440	51280	На своих экранах вы видите веб-ресурс DetectExpert,
51680	56380	мой веб-сайт, на котором у меня один из сервисов предоставляет прокси.
57700	59300	Мы предоставляем прокси.
59520	61520	Прокси как мобильные, так и резидентные.
61720	66160	И за те много лет, что работает этот сервис,
67560	71280	самый популярный вопрос, который был от пользователей,
71720	73120	это что делать с DNS.
73560	75400	Но в случае использования мобильных адресов,
75480	79920	мы, конечно же, можем предоставить соединение типа OpenVPN или WireGuard,
80320	82920	и в таком случае DNS будет подтянут автоматически.
83000	88880	Но что делать, если пользователь принципиально хочет подключить прокси SOCKS?
89320	91320	Например, SOCKS 5.
91720	93000	И знаете, зачем он это хочет?
93160	98600	Потому что он хочет эти прокси использовать в своем антидетект-браузере,
98880	101480	либо в какой-либо другой программе.
102680	106960	И в частности, человек говорит, а какой же DNS мне выставить?
108520	114720	Самый популярный ответ, который пользователи дают друг другу на этот вопрос,
115160	118440	заключается в том, что выставь себе Google DNS и не парься.
118440	122760	Давайте разберемся, можно ли работать с Google DNS,
123120	127820	со всеми популярными DNS, общедоступными, и как это делать правильно.
128800	131740	Забегая вперед скажу, как я и говорил в начале этого урока,
132460	135280	вы никогда правильно с DNS не работали.
136280	136900	Приступаем.
137420	144080	Итак, что же сделает пользователь, когда он установит SOCKS прокси в свой антидетект-браузер,
144080	148280	который просто не поддерживает подключение с помощью OpenVPN или WireGuard,
148440	152200	он задастся вопросом, какой же DNS ему выставить.
152480	156660	И по факту, действительно в интернете практически нет информации,
157120	160140	касаемо того, какой DNS необходимо использовать.
160980	163740	И мы сейчас с вами об этом поговорим.
164520	167600	Открываем нашу схему и смотрим.
168500	173900	Итак, у нас есть два самых популярных варианта, которые используют пользователи.
174340	177140	Первый самый популярный вариант это Google DNS.
177500	178320	Четыре варианта.
178440	178940	Восьмерки.
179200	181680	Все прекрасно мы их знаем, эти четыре восьмерки.
182180	183580	Быстрый, хороший DNS.
184320	188300	Второй по популярности DNS это DNS от Cloudflare.
188480	189320	Четыре единицы.
190060	193800	Два самых популярных публичных DNS сервиса.
194440	201020	Есть также другие, такие как OpenDNS, Quad9, AdblockDNS и так далее.
201020	203440	Не будем сейчас заострять на них внимание.
203640	207100	Они слишком мелкие для нашего масштаба.
207100	213860	Если мы обратим внимание на статистику, то берем США.
213860	218660	Конкретно сейчас у меня цифры, перед вами это цифры статистики по США.
218660	224460	Кто хочет, можете запросить точно такую же статистику на 2024 год.
224460	236860	Так вот, интересной особенностью первой заключается то, что 80% всех пользователей США используют DNS от своего интернет-провайдера.
236860	241340	И лишь 20% используют кастомные DNS.
241920	248420	В моем случае мы эти 20% разделили условно на 15,5%.
248420	254700	Это доля Google DNS и 4,5% это доля Cloudflare DNS.
254880	260780	Конечно, можно было еще выделить примерно 0,2% под все остальные публичные сервисы.
261120	263120	Но не будем сейчас на них заострять внимание.
263120	266840	Будем говорить только лишь о самых-самых популярных.
266860	270760	Почему происходит такая большая разница?
271380	287620	Дело в том, что в 80%, которые принадлежат рядовым жителям США, относятся как мобильные DNS, которые предоставляются автоматически за счет оператора сотовой связи.
288060	295860	Также сюда относятся самые обычные DNS, которые предоставляются провайдерами Comcast, AT&T и прочими.
295860	296820	Дело в том, что...
296820	300920	что когда самый рядовой американец захотел провести себе интернет,
301640	305480	он не будет ковряться в модеме и выставлять себе какой-то кастомный DNS.
306200	308360	Ему это неинтересно, ему это не нужно.
308480	314940	Ему пришли, поставили модем, зачастую, причем этот модем управляется со стороны провайдера.
314940	318120	Иными словами, у провайдера всегда есть доступ к вашему модему,
318380	323760	точнее к модему данного американца, для того, чтобы произвести там любые изменения,
323760	330720	в том числе различного рода отражения атак, изменения хождения трафика и так далее и тому подобное.
331060	333760	Эта практика, кстати, является очень популярной.
334520	342720	Например, в Объединенных Арабских Эмиратах такой провайдер, как Do или Etisalat,
343040	346000	они точно также используют такую же систему.
346000	353540	Если мы возьмем Катар, то же самое, Бахрейн, то же самое, Саудовская Аравия, то же самое.
353760	358400	По Латинской Америке, Бразилия, ситуация один в один.
358520	364220	Выдаются модемы и роутеры, полностью прошитые под провайдера.
364360	367460	Во многих случаях ты не можешь даже изменить себе DNS.
367660	369660	Почему? Потому что это запрещено.
369660	374580	Плюс ко всему, не стоит забывать о таких странах, как Китай, конечно же,
375000	379020	и остальных странах, в которых есть необходимость фильтрации трафика.
379840	383660	И, к сожалению, в таких случаях DNS всегда будет отрешен.
383760	384760	От провайдера.
384760	388760	Поэтому просто так это заметим сейчас для себя.
388760	393760	Это не является чем-то для нас основополагающим и так далее.
393760	399760	Но нам нужно понимать, что когда мы собираемся использовать нашу систему для работы по США,
399760	404760	нам необходимо максимально мимикрировать под рядового жителя США.
404760	410760	И, конечно же, с каким-то кастомным DNS это сделать будет сложнее.
410760	412760	Но, в принципе, ничего страшного, правда?
412760	413760	Ну, неплохо.
413760	416760	Почему будем мы использовать DNS от провайдера?
416760	419760	Будем мы использовать, например, DNS от Google?
419760	422760	Ведь хорошее дело, он же все равно работает.
422760	426760	И, в принципе, 15,5% — это не такая маленькая цифра.
426760	429760	Это должно решить все наши вопросы.
429760	436760	Но давайте мы сейчас немного посмотрим на то, как Google DNS будет работать.
436760	439760	Во-первых, что касаемо Google DNS?
439760	442760	Есть несколько интересных фактов.
442760	447760	На Google DNS-сервисе никогда не проводился публичный аудит.
447760	451760	Иными словами, все, что у нас есть — это white papers.
451760	455760	То есть это у нас есть только лишь заявление от компании Google.
455760	462760	По факту ни один сторонний человек не знает, что происходит на этих серверах.
462760	469760	Да, конечно, компания Google заявляет, что мы удаляем весь IP-адрес и сохраняем только лишь его часть
469760	471760	для статистики, для отражения атак и так далее.
471760	476760	Мы сохраняем запросы пользователей.
476760	478760	В принципе, все очень классно.
478760	485760	Но, повторюсь, ни одного, ни единого аудита проведено не было.
485760	487760	Ну, в принципе, ладно.
487760	490760	Мы не являемся какими-то плохими людьми, правда?
490760	496760	Мы ведь всего-навсего хотим создавать, может быть, много аккаунтов в Facebook,
496760	499760	либо же много аккаунтов в Instagram или в Microsoft.
499760	501760	Ну, пусть они хранят информацию.
501760	503760	Правда?
503760	505760	Ведь никаких проблем с этим не будет.
505760	506760	Но!
506760	515760	Дело в том, что тот же самый Google в своих white papers заявляет, что они борются с бот-трафиком.
515760	517760	В принципе, нас это касается как-то.
517760	518760	Ведь мы не боты.
518760	520760	Так думает обычный человек.
520760	526760	Но давайте сравним эту ситуацию, например, с DNS от Cloudflare.
526760	528760	Фактически то же самое.
528760	530760	Но в данном случае публичный аудит у них был.
531760	535760	Если не ошибаюсь, это был 2022 год.
535760	542760	Действительно, в рамках публичного аудита не было выявлено каких-то систем сохранения информации и так далее.
542760	544760	Но мы с вами все взрослые люди.
544760	549760	И мы прекрасно понимаем, что то, что находится сейчас на DNS во время аудита,
549760	556760	через буквально полминуты после того, как этот аудит был закончен, может поменяться.
556760	558760	И по факту...
558760	559760	Ну...
559760	564760	Ты этот сервер особо не опломбируешь каким-либо образом и так далее.
564760	572760	То есть для того, чтобы действительно этот сервер соблюдал какие-то рамки приватности пользователей,
572760	580760	должна быть круглосуточная, сторонняя, третьесторонняя система наблюдения за этим сервером.
580760	584760	А все остальное это замыливание глаз публики.
584760	585760	И ничего более.
585760	587760	И поэтому...
587760	588760	Cloudflare...
588760	597760	Как мы знаем его, борец с DDoS-атаками, более чем интересуется выявлением ботов.
597760	599760	Чем это нам грозит?
599760	603760	Давайте мы с вами сейчас немного порассуждаем.
603760	613760	Дело в том, что все DNS-сервера, которые работают в США, и все интернет-провайдеры,
613760	616760	они обмениваются информацией между собой.
616760	617760	И за этими серверами...
617760	621760	За серверами Google, за серверами Cloudflare,
621760	627760	стоит несколько организаций, о которых вы вряд ли когда-либо слышали.
627760	629760	И вот они у нас на экране.
629760	633760	Итак, первая организация, которая у нас есть...
633760	634760	Вот она.
634760	639760	Messaging, Malware and Mobile Anti-Abus Working Group.
639760	645760	Данная компания, данное объединение, рабочая группа,
645760	651760	имеет совместные в блок-листы статистику и телеметрию по бот-трафику.
651760	658760	Сюда входят такие компании, как AT&T, Comcast, Cloudflare, Meta,
658760	664760	со всей их обвязкой, с всех сервисов, Microsoft и Google.
664760	673760	Это я перечислил только гигантов, я не стал перечислять какие-либо другие, более мелкие компании.
673760	676760	Окей, давайте посмотрим на вторую организацию.
676760	680760	Вторая организация, которая называется у нас FSISAC,
680760	685760	это финансовый сектор с закрытой обмен угрозами,
685760	689760	в том числе DNS-сигналы о ботах.
689760	692760	Используется банками и платёжными системами.
692760	695760	Такими платёжными системами, например, как Autorise,
695760	700760	банками как Chase, Capital One, JP Morgan
700760	703760	и фактически всеми-всеми-всеми.
703760	706760	Идём дальше.
706760	708760	Кто у нас ещё здесь представлен?
708760	713760	У нас представлена компания, которая называется APVG.
713760	717760	К сожалению, стрелочку к ней не провёл, но представьте, что она здесь есть.
717760	722760	Глобальный пул данных о фишинговых и ботнет-ресурсах.
722760	727760	Есть API для обмена списками для членов.
727760	732760	Кстати, вы можете зарегистрироваться в данной компании и ознакомиться с их API.
732760	737760	Сюда входят банки, интернет-провайдеры, хостинг-провайдеры,
737760	741760	опять же, сюда входит Google, сюда входит Microsoft,
741760	744760	сюда входит Apple, что интересно,
744760	747760	и плюс ещё некоторые антифрод-системы,
747760	749760	которые мы любим, такие антифрод-системы,
749760	752760	как, например, CyberSource и SIFT.
752760	757760	Ну и последняя, но не последняя по значимости,
757760	759760	Cyber Trade Alliance.
759760	761760	Обмен сигнатурами,
761760	767760	включая данные о ботнетах, DNS, прокси, VPN-провайдерах.
767760	769760	Интересно, правда?
769760	776760	Сюда входит Cisco, Palo Alto, Wells Fargo, PayPal,
776760	783760	корпорация Tesla и многие другие гиганты.
783760	788760	И, что ещё интереснее, самая-самая интересная фишка,
788760	791760	заключается в том, что данные,
791760	796760	союзы имеют ещё и внутренние связи между собой.
796760	799760	Плюс, конечно, стоит ещё упомянуть такую компанию,
799760	802760	такое, точнее, объединение, как AIS,
802760	805760	но это уже госпрограмма.
805760	807760	Раньше существовал такой проект,
807760	809760	назывался он Global Data Transfer.
809760	812760	Global Data Transfer позволял обмениваться информацией
812760	815760	между различными крупными технологическими гигантами.
815760	819760	В частности, когда одна компания профилируется,
819760	821760	например, на защите от дозиров,
821760	824760	великолепнейшим образом она может помочь другой компании
824760	827760	для того, чтобы объединить усилия в борьбе.
827760	829760	Ну, понятно, мир, дружба, жвачка.
829760	831760	Всё хорошо.
831760	834760	По факту, что для нас это грозит?
834760	836760	А я вам рассказываю.
836760	841760	Если ваш трафик в, например, Google DNS
841760	844760	был зарегистрирован как бот-трафик,
844760	846760	об этом узнает и CloudFlare,
846760	848760	об этом узнает Meta,
848760	850760	об этом узнает Microsoft,
850760	852760	об этом узнают банки
852760	854760	и узнает платёжная система.
854760	859760	Если Google пометил вас как бот-трафик,
859760	861760	а ведь Google, его DNS,
861760	864760	прекрасно видят ваш IP-адрес,
864760	866760	то есть IP-адрес вашего прокси
866760	868760	или IP-адрес вашего VPN,
868760	873760	и будь это самый-самый кристально чистый IP-адрес,
873760	875760	который вы только можете купить,
875760	878760	ваша активность убьёт этот IP-адрес.
878760	880760	При этом, знаете что?
880760	883760	Самое интересное, что здесь есть.
883760	887760	Вы убиваете прокси самостоятельно.
887760	890760	Но, в частности, нужно отдать должное,
890760	892760	вы можете эти прокси оживить.
892760	895760	Вот это самое прикольное, что здесь есть.
895760	898760	И я вам расскажу, каким образом это всё работает.
898760	900760	Каким образом Google
900760	903760	или каким образом CloudFlare
903760	906760	могут определить бот-трафик?
906760	910760	Для этого у нас есть ещё один игрок на рынке,
910760	912760	который называется Akamai.
912760	915760	Я не буду сейчас предоставлять вам документы
915760	916760	касаемо этого игрока,
916760	920760	поскольку он заслуживает отдельной лекции.
920760	924760	Но сейчас мы будем с вами дальше оперировать
924760	928760	конкретно системой идентификации пользователей,
928760	930760	которую использует Akamai.
930760	934760	И, соответственно, у нас есть все шансы предполагать,
934760	939760	что Google, CloudFlare и прочие DNS-сервисы,
939760	943760	они также используют именно эти алгоритмы.
943760	946760	Я сейчас вас с ними познакомлю.
946760	949760	Не будем уделять этому огромное внимание,
949760	953760	но, как я и говорил, вы сами убиваете свои прокси.
953760	956760	Давайте посмотрим, как это происходит.
956760	958760	Идём немного право.
958760	960760	Вот мы.
960760	962760	Представьте себе, вот мы.
962760	965760	Вот это этот великолепный пользователь,
965760	968760	который зашёл и где-то, неизвестно где,
968760	971760	приобрёл себе экстра чистые прокси.
971760	974760	Самые чистые выделенные прокси.
974760	976760	Представьте себе, что во всех чекерах,
976760	978760	в которых вы проверяли этот прокси,
978760	981760	рейтинг Фродо – ноль.
981760	986760	Никто этим прокси не пользовался на протяжении месяца, например.
986760	990760	И плюс ещё этот прокси останется на месяц дальше у вас.
990760	994760	То есть самый-самый чистый прокси.
994760	996760	Согласитесь, с такого прокси, наверное,
996760	999760	очень легко пойти и открыть себе банковский счёт
999760	1001760	и зарегистрировать аккаунт Фейсбука,
1001760	1006760	либо же участвовать в партнёрской программе Майкрософт.
1006760	1008760	Все вы согласитесь со мной, правда?
1008760	1012760	Но по факту ни черта подобного.
1012760	1015760	И объясняется это вот чем.
1015760	1017760	Смотрим сюда.
1017760	1022760	Ваш прекрасный, самый чистый IP-адрес,
1022760	1025760	если он не имел никакой активности,
1025760	1027760	это очень плохо.
1027760	1029760	Во-первых.
1029760	1031760	Во-вторых, давайте посмотрим на то,
1031760	1036760	какую активность может изобразить пользователь.
1036760	1039760	Давайте сделаем так.
1039760	1042760	Вот у нас есть запросы.
1042760	1044760	Что делает пользователь после того,
1044760	1049760	как он включил этот чудесный экстра чистый прокси
1049760	1051760	в своём браузере?
1051760	1054760	Он переходит на сайт всеми известный,
1054760	1056760	на сайт BrowserLeaks.
1056760	1060760	И на этом сайте BrowserLeaks он хочет увидеть,
1060760	1062760	как же у него меняется всё-таки Canvas.
1062760	1064760	Какой он красивый, например.
1064760	1067760	Или может быть у него утекает WebRTC как вариант?
1067760	1068760	Тоже вариант.
1068760	1071760	А может быть ему вообще в голову придёт нажатие
1071760	1073760	Run DNS Leak Test?
1073760	1077760	Это самый лучший, вообще самый-самый лучший вариант.
1077760	1080760	Но давайте сейчас подумаем почему.
1080760	1083760	Итак, пользователь переходит на сайт BrowserLeaks,
1083760	1085760	чтобы проверить свои отпечатки.
1085760	1088760	Но плюс, когда он только запустил прокси,
1088760	1092760	у него его ещё антидетект браузер.
1092760	1095760	Если он сделан не совсем умным человеком,
1095760	1101760	то он даже отправит запрос на сервер лицензирования
1101760	1104760	с IP-адреса прокси.
1104760	1106760	Да, не во всех браузерах это есть.
1106760	1109760	В некоторых браузерах всё-таки сделано больше по уму.
1109760	1111760	И когда запрос лицензии,
1111760	1116760	который происходит раз в 15 минут, раз в полчаса, раз в час,
1116760	1121760	например, идёт через ваш основной канал интернета,
1121760	1122760	а не через прокси,
1122760	1125760	тогда, в принципе, номер два мы можем здесь убрать.
1125760	1128760	Но проверьте сами.
1128760	1132760	Если у вас запрос к системе лицензирования вашего браузера
1132760	1134760	идёт через прокси,
1134760	1139760	то, соответственно, он идёт, скорее всего, по доменному имени.
1139760	1141760	Поскольку IP-адрес могут,
1141760	1143760	DDoS-ить и так далее.
1143760	1147760	Поэтому, скорее всего, что будет использовано доменное имя,
1147760	1152760	в котором будет даже видно, какой антидетект браузер вы используете.
1152760	1155760	Ну, дальше, конечно же, запрос MiUnit, например.
1155760	1159760	Или же пользователь захочет со своего же проксика
1159760	1163760	зайти на сайт, например, прокси-провайдера
1163760	1165760	и изменить какую-нибудь информацию,
1165760	1168760	изменить страну или посмотреть там zip-код, например,
1168760	1170760	что-нибудь такого плана.
1170760	1171760	Иными словами,
1171760	1173760	такого рода активность
1173760	1176760	она уже подразумевает под собой
1176760	1181760	то, что этот человек не является легитимным пользователем.
1181760	1186760	И, соответственно, к нему можно присмотреться более детально.
1186760	1189760	Потому что у него уже есть первый красный флаг
1189760	1192760	это посещение подозрительных ресурсов.
1192760	1196760	Здесь нет порнхаба, здесь нет фейсбука,
1196760	1199760	здесь нет каких-то ресурсов, которые интересны людям.
1199760	1202760	Здесь только специфические ресурсы.
1202760	1205760	И поскольку все ваши запросы идут через Google DNS,
1205760	1208760	которые вы выставили в настройках своего антидетект-браузера,
1208760	1210760	либо же в настройках вашей операционной системы,
1210760	1212760	либо в настройках вашего роутера,
1212760	1215760	то Google великолепнейшим образом это все видит.
1215760	1218760	Он видит, что с вашего экстра чистого IP-адреса
1218760	1221760	пришли вот такого рода запросы.
1221760	1224760	И, соответственно, ваш экстра чистый IP-адрес
1224760	1226760	уже ставится под вопрос.
1226760	1228760	Но самое интересное находится внизу,
1228760	1230760	под этой дистрофичной стрелочкой.
1230760	1239760	Как определить, что вы используете стороннее программное обеспечение?
1239760	1244760	У вас нет запросов к Akamai сети.
1244760	1247760	У вас нет запросов к Microsoft.
1247760	1252760	У вас нет запросов к CDN сетям.
1252760	1254760	Что это означает?
1254760	1257760	А я вам сейчас дальше расскажу
1258760	1259760	подробно.
1259760	1262760	Дело в том, что ваш антидетект-браузер,
1262760	1265760	либо какое-то другое программное обеспечение,
1265760	1267760	которое используется для проксирования
1267760	1269760	того же самого браузера,
1269760	1272760	не будет расходовать трафик прокси.
1272760	1275760	Многие пользователи как раз этого боятся.
1275760	1278760	Ух, у меня уйдет там несколько лишних гигабайт,
1278760	1281760	если я буду делать проксирование на всю систему.
1281760	1286760	И здесь кроется невероятно большая сука проблема.
1286760	1292760	Если у вас будут отсутствовать вот эти три кита,
1292760	1295760	на которых держится операционная система Windows,
1295760	1297760	в данном случае мы обсуждаем,
1297760	1301760	то ваш трафик будет признан бот-трафиком
1301760	1304760	с вероятностью 100%.
1304760	1306760	Почему так происходит?
1306760	1308760	Давайте наглядно посмотрим.
1308760	1311760	Вот я сейчас запускаю программное обеспечение,
1311760	1314760	которое называется GlassWire.
1314760	1317760	Мы можем посмотреть с вами на рисунке.
1317760	1319760	Оно у нас закрылось. Один момент.
1319760	1327760	Мы можем посмотреть с вами на рисунке график трафика-рафика.
1327760	1332760	Итак, посмотрите, пожалуйста, на мою сетевую активность.
1332760	1334760	Это сейчас сетевая активность,
1334760	1337760	которая происходит с моего ПК,
1337760	1339760	когда я записываю видео.
1339760	1341760	И в данном случае у меня открыт браузер Chrome,
1341760	1344760	на котором я показываю вам диаграмму.
1344760	1350760	И открыта программа для записи видео.
1350760	1354760	Все остальные программы я не открывал лично.
1354760	1356760	Они открыты в фоне.
1356760	1358760	Если мы с вами посмотрим,
1358760	1360760	окей, Google трафик нас в принципе устраивает,
1360760	1362760	это обычный браузер.
1362760	1365760	Но вот такая вот вещь, хост-процесс.
1365760	1368760	Как вы думаете, что это?
1368760	1371760	Это Chrome. Всего-навсего.
1371760	1373760	А если у нас хост-процесса нет,
1373760	1377760	то есть если у нас, например, есть трафик просто браузера,
1377760	1381760	а подключения к данному IP-адресу у нас отсутствует,
1381760	1384760	быть может все-таки, который находится в Ирландии,
1384760	1387760	быть может все-таки это проблема в том,
1387760	1391760	что у нас не совсем тот браузер,
1391760	1393760	о котором мы заявляем.
1393760	1397760	У нас есть также какая-то активность от Anti-Kernel and System.
1397760	1399760	Давайте посмотрим, кто это такой.
1399760	1401760	Это Microsoft Windows.
1401760	1403760	Это Microsoft Windows.
1403760	1407760	Microsoft Windows имеет перманентное подключение к серверу,
1407760	1409760	это Болгария, если не ошибаюсь, наверное.
1409760	1411760	Да, это Болгария.
1411760	1414760	К вот такому вот IP-адресу в Болгарии.
1414760	1418760	Но, соответственно, подключение есть, но не по домену,
1418760	1420760	можно сказать, да? Правильно?
1420760	1423760	Вот у нас подключение идет не по домену.
1423760	1426760	То есть, в принципе, это DNS может и не видеть.
1426760	1429760	Какие у нас еще процессы? Хост-процесс.
1429760	1431760	Вот если мы сейчас смотрим на хост-процесс,
1431760	1433760	мы видим здесь дополнительно,
1433760	1435760	мы ловим здесь сразу же и Akamai.
1435760	1439760	Обращение к Akamai идет уже по доменному имени,
1439760	1441760	значит, оно идет через DNS.
1441760	1445760	Обращение к SSL.com, соответственно, тоже через DNS.
1445760	1448760	К Google, ну, это нас особо не волнует, в принципе.
1448760	1450760	DNS Google, кстати, интересный момент.
1450760	1456760	На моем компьютере сейчас не выставлен нигде DNS Google.
1456760	1457760	Вроде бы.
1457760	1458760	А может быть и выставлен.
1458760	1459760	Надо посмотреть.
1459760	1461760	По-моему, я когда показывал, да,
1461760	1463760	я для теста здесь его выставил.
1463760	1465760	Сейчас я вам расскажу чуть детальнее.
1465760	1467760	Соврал, соврал, извините.
1467760	1469760	Ну, Windows Report Problem опять же.
1469760	1470760	Смотрим.
1470760	1472760	Подключение идет через домен.
1472760	1476760	Иными словами, благодаря анализу трафика,
1476760	1479760	анализу вашего DNS трафика,
1479760	1482760	есть возможность, была еще возможность,
1482760	1485760	еще много лет назад с помощью машинного обучения
1485760	1487760	определить, что пользователь не является
1487760	1489760	реальным пользователем.
1489760	1492760	Ну, а сейчас, во времена искусственного интеллекта,
1492760	1494760	это всего-навсего пара бустяков.
1494760	1497760	Итак, какие наши основные проблемы?
1497760	1500760	Проблема первая, когда запускается,
1500760	1504760	когда запускается проксик.
1504760	1508760	Это посещение подозрительных хостов.
1508760	1510760	Проблема вторая.
1510760	1513760	Отсутствие реальных подключений к реальным запросам,
1513760	1514760	к реальным ресурсам.
1514760	1516760	Akamai, Microsoft и CDN.
1516760	1519760	CDN, кто не знает, Content Delivery Network.
1519760	1521760	CDN сети.
1521760	1524760	Благодаря этим активностям есть возможность
1524760	1527760	уже определить, что используется какое-либо
1527760	1530760	какое-либо программное обеспечение.
1530760	1534760	Не обязательно, что это может быть какой-то антидетект.
1534760	1537760	Их доля очень маленькая на рынке.
1537760	1539760	Но это может быть какой-нибудь скраппер,
1539760	1542760	кравлер и множество-множество других авлеров.
1542760	1545760	Соответственно, Google будет видеть,
1545760	1549760	что трафик с данного IP-адреса является подозрительным.
1549760	1556760	И обменяется этой информацией со всеми остальными участниками,
1556760	1560760	которые входят в данные союза,
1560760	1563760	про которые мы с вами уже обговаривали ранее.
1563760	1567760	И даже если вы не посещали, например, тот же самый ресурс Facebook,
1567760	1571760	Facebook будет уже о вас эту информацию знать.
1571760	1573760	Соответственно, как я говорил ранее,
1573760	1579760	каким образом можно отбелить данный IP-адрес.
1579760	1581760	И это действительно очень важная работа,
1581760	1583760	о которой мало кто задумывается.
1583760	1587760	Если у вас есть необходимость использовать Google DNS,
1587760	1589760	хотя мы можем от него отойти,
1589760	1593760	то самым простым вариантом будет
1593760	1596760	эта установка вашего проксика,
1596760	1598760	с которой вы хотите работать.
1598760	1602760	Например, на Raspberry Pi,
1602760	1604760	либо же на ваш роутер,
1604760	1608760	для того, чтобы через него максимально шел природный трафик.
1608760	1610760	То есть ваша операционная система,
1610760	1612760	например, ваша виртуальная машина,
1612760	1614760	будет совершать проверку обновлений,
1614760	1616760	будет совершать загрузку контента,
1616760	1620760	будет загружать и проводить все те же самые операции,
1620760	1622760	которые проводит обычный пользователь.
1622760	1625760	И соответственно, всего всего, что от вас необходимо,
1625760	1627760	всего-навсего одна вещь.
1627760	1630760	Оставить машину в покое.
1630760	1631760	И все.
1631760	1633760	Если вы хотите, чтобы ваше действие,
1633760	1637760	которое вы совершаете из этого экстра чистого IP-адреса,
1637760	1639760	принесло плоды,
1639760	1643760	в таком случае запустите прокси на всю систему
1643760	1646760	и оставьте этот прокси без какой-либо активности.
1646760	1649760	Вы будете думать, что активности по факту нет,
1649760	1651760	но в реальности она будет.
1651760	1655760	И соответственно, даже вот давайте посмотрим Telegram.
1655760	1658760	Telegram у нас, ну да, он по IP-адресу обращается.
1658760	1659760	Ладно, хрен с ним.
1659760	1660760	Steam.
1660760	1664760	Steam вот, например, общается по доменному имени.
1664760	1667760	Соответственно, что будет видеть ваш,
1667760	1671760	какую информацию в вашем IP-адресе будет видеть Google DNS?
1671760	1673760	Он будет видеть, что вы используете Steam,
1673760	1676760	он будет видеть, что вы используете браузер Google Chrome,
1676760	1679760	он будет видеть, что вы используете операционную систему Windows.
1679760	1681760	Ваш трафик является легитимным.
1681760	1683760	И все, что нужно для этого сделать?
1683760	1685760	Ничего не делать.
1685760	1688760	Просто оставить его, работать на всю систему в автономном режиме.
1688760	1693760	Самый лучший и самый простой вариант.
1693760	1700760	Ну и как я говорил, вот этот вот чудеснейший тест, проверка DNS.
1700760	1705760	Это просто самый-самый кайф, который только может существовать.
1705760	1711760	Кто делает проверку DNS, можете себе повесить на лбу табличку «Долбоеб»
1711760	1713760	и ходить с этой табличкой.
1713760	1717760	Если консоль нам сейчас поможет, мы сейчас, я вам сейчас покажу.
1718760	1726760	Ну а выводов у нас тут нету.
1726760	1730760	Если не ошибаюсь, у нас их здесь не видно.
1730760	1733760	Ну не видно и хрен с ними, правильно?
1733760	1734760	Суть.
1734760	1736760	А нет, вот есть, смотрите.
1736760	1739760	Смотрите, смотрите, смотрите.
1739760	1742760	Ну вот давайте откроем информацию.
1742760	1747760	Вот какие запросы делает сайт BrowserLeaks.
1748760	1750760	Ну, например, сайт BrowserLeaks.
1750760	1753760	Что в этих запросах общего?
1753760	1758760	Само доменное имя плюс DNS-адрес.
1758760	1761760	То есть не BrowserLeaks.com, а BrowserLeaks.org.
1761760	1763760	Они используют отдельный домен.
1763760	1769760	Они подняли там DNS-сервера, где поднимается кастомный домен.
1769760	1774760	И, соответственно, этот домен, он привязан к сессии.
1774760	1776760	И поэтому никто...
1776760	1781760	Никто до вас по этому домену не обращался.
1781760	1783760	Никто не будет обращаться.
1783760	1788760	Соответственно, когда на DNS BrowserLeaks поступит запрос,
1788760	1793760	к какому IP-адресу принадлежит такой-то, такой-то домен,
1793760	1800760	тогда BrowserLeaks может определить, с какого DNS пришел данный запрос.
1800760	1805760	И, соответственно, как мы видим, в данном случае вот у меня запрос пришел с CloudFlare,
1805760	1807760	запрос пришел с Google.
1807760	1814760	Одновременно с трех IP-адресов пришел запрос на вот это доменное имя.
1814760	1819760	Но что самое интересное происходит здесь, вы уже наверняка догадались.
1819760	1827760	Будь то CloudFlare, будь то Google, они сразу же будут знать, что используется проверка DNS.
1827760	1831760	Потому что такая активность является, во-первых, подозрительной.
1831760	1834760	Во-вторых, она, конечно же, связана с ресурсом, который занимается проверкой анонимности.
1835760	1841760	Поэтому самый красный из всех Red Flags, который можно только представить.
1841760	1848760	Так что, если вы после покупки прокси, после установки их в систему,
1848760	1851760	любите зайти на сайт BrowserLeaks и нажать кнопочку проверки,
1851760	1855760	ну, я вам сообщил, какую табличку вы можете себе на лоб повесить.
1855760	1857760	Но на этом мы не заканчиваем.
1857760	1861760	Сейчас прошла еще только половина от нашей лекции.
1861760	1863760	Давайте посмотрим дальше.
1863760	1864760	Что же делать?
1864760	1868760	Как нам поступить с нашим DNS?
1868760	1870760	Давайте посмотрим вот сюда.
1870760	1877760	Наш обычный, самый хороший DNS, который принадлежит провайдеру.
1877760	1880760	Нам нужно каким-то образом его получить.
1880760	1886760	Но несмотря на то, что он не имеет таких, конечно же, проблем в большинстве случаев, как и Google,
1886760	1893760	нужно помнить, что, как я и говорил ранее, Comcast, AT&T и другие крупные интернет-провайдеры,
1893760	1898760	они также имеют систему отлова ботов на своих DNS-серверах.
1898760	1905760	В меньшем масштабе, безусловно, использовать нативный DNS будет намного лучше, чем использование кастомных DNS.
1905760	1913760	Но все же нам нужно определить определенные проблемы, которые нам сулит использование данного IP-адреса.
1913760	1918760	И прежде чем мы перейдем к установке реального DNS и возможности, как его найти,
1918760	1921760	нам нужно обратить внимание на то, что
1921760	1928760	нативный DNS, в отличие от того же самого DNS Google или Cloudflare,
1928760	1931760	имеет под собой определенный набор метрик.
1931760	1933760	Что это за метрики?
1933760	1939760	Первая метрика, которую мы можем увидеть, это DNS Fraud Score, IP Fraud Score.
1939760	1943760	В данном случае DNS является обычным сетевым ресурсом,
1943760	1948760	и он точно также подвержен проверке, как подвержены проверки, например,
1948760	1951760	нашего IP-адреса, IP-адреса нашего прокси и так далее.
1951760	1955760	Второе. DNS Subnet Fraud Score.
1955760	1961760	В данном случае производится проверка не только IP-адреса, но и всей подсети.
1961760	1964760	Дело в том, что подсеть может быть грязная, и, соответственно,
1964760	1968760	каким бы чистым не был бы IP-адрес нашего DNS,
1968760	1971760	остальные субъекты в этой сети могут быть грязные,
1971760	1975760	и поэтому у нас будут проблемы с данным DNS-сервером.
1975760	1979760	Третье. DNS ASN Fraud Score.
1979760	1980760	Что такое ASN?
1980760	1982760	На всякий случай.
1982760	1986760	ASN, вот представим себе наш...
1986760	1988760	Где он наш? Вот он.
1988760	1991760	Вот он мой IP-адрес на текущий момент.
1991760	1993760	И здесь есть такой пункт, называется Network.
1993760	1995760	Вот он.
1995760	1997760	Переходим мы на данный пункт.
1997760	2004760	Ну, здесь в данном случае мы переходим сразу же на официальный ресурс Border Gateway протокола,
2004760	2007760	поэтому давайте мы вот этот ASN скопируем.
2007760	2009760	И перейдем мы сейчас на...
2010760	2016760	DNS-lytics.
2016760	2018760	Итак, смотрите.
2018760	2021760	ASN, автономная частная сеть.
2021760	2025760	Ранее называлась BGP, Border Gateway Protocol.
2025760	2029760	Определенный, можно так буду говорить по-простому,
2029760	2031760	определенный конгломерат IP-адресов.
2031760	2037760	Когда какое-то юридическое лицо захочет предоставлять услуги интернета на определенной области,
2037760	2039760	ему необходимо будет выделенные IP-адреса.
2039760	2044760	Соответственно, обращаются в компанию AIRIN или в компанию RIPE, как в моем случае.
2044760	2055760	И вот в 5 августа 1998 года было компании RIPE выделено 2 396 672 IP-адреса
2055760	2060760	для компании Emirates Telecommunication Group Company.
2060760	2062760	Etisalat.
2062760	2064760	Собственно говоря, мой интернет-провайдер.
2064760	2067760	У данной ASN-сети,
2067760	2070760	у данной ASN-сети есть как Fraud Score,
2070760	2074760	то есть то, о чем мы здесь говорим, вот в пункте номер 3,
2074760	2078760	так и Bot Rate, и еще и Spam Rate даже.
2078760	2084760	Есть регулярно, выходят различного рода black-листы,
2084760	2087760	в которых содержат плохие ASN-сети.
2087760	2094760	ASN-сети с бот-трафиком, ASN-сети с мошенническим трафиком, с ботнетами и так далее.
2094760	2096760	Ну и также есть более...
2097760	2099760	прогрессивные списки.
2099760	2102760	В данном случае есть организация CleanTalk.
2102760	2108760	И вот мы видим, например, статистику по различным ASN-сетям,
2108760	2112760	какое количество IP-адресов находится в этой ASN-сети
2112760	2115760	и сколько из них замечено в спам-активности.
2115760	2118760	То есть мы можем посмотреть, например, есть сети...
2118760	2121760	Вот в Индии, что интересно, есть какая-то сеть,
2121760	2124760	в которой спам-активность всего-навсего 0,9%.
2124760	2125760	Великолепная.
2125760	2126760	Ну а...
2126760	2127760	Где здесь еще?
2127760	2128760	США.
2128760	2130760	Спам-активность 35%.
2130760	2134760	Скорее всего, что данный ресурс может принадлежать
2134760	2138760	какой-либо компании, какому-нибудь дата-центру.
2138760	2140760	И мы сейчас это видим.
2140760	2141760	Кстати, интересный момент.
2141760	2142760	Вот смотрите.
2142760	2148760	В данной ASN-сети 293 425 IP-адресов.
2148760	2154760	А веб-сайтов зарегистрировано в этой сети 626 851.
2154760	2157760	И вот, что мы видим.
2157760	2160760	VPN, хостинг и хорошие боты.
2160760	2161760	Якобы.
2161760	2166760	Но давайте посмотрим сейчас на тот же самый индийский.
2166760	2168760	Где у нас вот этот индийский?
2168760	2170760	Вот, даже Индия 0,5%.
2170760	2171760	Класс.
2171760	2172760	Переходим сюда.
2172760	2179760	Здесь у нас 405 000 IP-адресов и всего-навсего 117 веб-сайтов.
2179760	2182760	За счет такого простого...
2182760	2188760	За счет такой простой сверки есть возможность определить,
2188760	2193760	является ли данная ASN-сеть хостингом,
2193760	2197760	либо же является легитимным интернет-провайдером.
2197760	2202760	Поэтому тоже важно, когда вы поднимаете свой DNS-сервер,
2202760	2206760	либо же когда используете какой-то публичный, нативный DNS-сервер,
2206760	2209760	лучше посмотреть, где этот...
2209760	2211760	В какой ASN-сети находится данный сервер.
2211760	2215760	И можно ли с него работать.
2215760	2216760	Идем дальше.
2216760	2219760	Спамрейт мы уже с вами обсудили.
2219760	2221760	DNS Anomaly.
2221760	2225760	DNS Anomaly это довольно интересный параметр,
2225760	2232760	который позволяет выявить реальное использование поддельного DNS.
2232760	2233760	Я вам сейчас расскажу.
2233760	2235760	Это будет наш следующий пункт.
2235760	2237760	Просто пока запомните.
2237760	2239760	Ну и седьмой пункт.
2239760	2241760	Называется у нас User IP.
2241760	2242760	Activity.
2242760	2243760	Бот.
2243760	2246760	Даже маленькие DNS-сервера,
2246760	2248760	которые принадлежат обычным интернет-провайдерам,
2248760	2250760	они также хотят бороться с ботами.
2250760	2251760	Бот-трафик.
2251760	2253760	Потому что бот-трафик нагружает саму сеть.
2253760	2257760	Бот-трафик создает неудобства другим пользователям и так далее.
2257760	2260760	И, в частности, есть великолепная система,
2260760	2262760	которая у нас вот здесь вот спряталась.
2262760	2264760	Называется она Google Safe Browsing.
2264760	2269760	Кстати, в ней участвует, конечно же, DNS от Google.
2269760	2276760	И также Google Safe Browsing имеет возможность коммуницировать с другими DNS-серверами,
2276760	2278760	которые к ней подключены.
2278760	2280760	Что такое Google Safe Browsing?
2280760	2288760	Google Safe Browsing в разрезе данного вопроса по-простому.
2288760	2292760	Полная передача и сдача всей информации, которой только можно.
2292760	2293760	Все.
2293760	2295760	Полное слежение за пользователем.
2295760	2298760	Ну, конечно, маскируется это под эгидой того,
2298760	2303760	что это возможность обеспечить безопасность пользователя и так далее.
2303760	2305760	Но вы сами прекрасно понимаете,
2305760	2308760	что когда вы посещаете какой-либо отель,
2308760	2312760	вы видите наверняка табличку в ванной,
2312760	2315760	в которой говорится, что данный отель, например,
2315760	2324760	очень борется за популяцию каких-нибудь синемордых пятилапых черепах
2324760	2326760	где-нибудь на Гибралтаре.
2326760	2327760	Поэтому, пожалуйста,
2327760	2329760	не смывайте свои какашки,
2329760	2332760	не бросайте полотенца на пол без нужды
2332760	2336760	и убирайте номер сами.
2336760	2338760	Желательно зубной щеткой.
2338760	2339760	Ну, примерно так.
2339760	2342760	А по факту просто-напросто владелец жлоб
2342760	2345760	и благодаря вот этой маленькой табличке
2345760	2348760	он экономит в месяц тысячи долларов
2348760	2353760	на моющих средствах, на стирке и на изношенных полотенцах.
2353760	2357760	Поэтому точно также под хорошей эгидой борьбы с этим,
2357760	2365760	с ботами маскируется самая простая и тупая слежка за пользователями.
2365760	2368760	User Activity мы с вами уже обсудили,
2368760	2371760	как это работает.
2371760	2376760	Ну что ж, сейчас у нас осталось еще две темы касаемо DNS.
2376760	2379760	Как найти свой собственный DNS под прокси
2379760	2384760	и что же может плохого приключиться с этим DNS?
2384760	2386760	Несмотря на то, что мы все уже изучили,
2386760	2388760	и так много знаем,
2388760	2392760	на самом деле есть еще важнейшая деталь,
2392760	2396760	которая позволяет пробить то, что вы используете в прокси.
2396760	2399760	Даже если по вашему DNS.
2399760	2405760	Итак, давайте обратимся сейчас к сервису от Vector T13.
2405760	2410760	Здесь на сайте DetectExpert на вкладке Checker есть чекер DNS.
2410760	2412760	Мы переходим сюда.
2412760	2415760	И теперь все, что нам нужно, нам нужно залогиниться.
2415760	2419760	Я сейчас произведу логин и через несколько секунд мы продолжим.
2419760	2425760	Не сочтите за рекламу, но я не знаю других сервисов в интернете,
2425760	2428760	которые бы выполняли такую функцию.
2428760	2430760	И эта функция нам невероятно важна.
2430760	2432760	Что же это такое?
2432760	2436760	Это возможность найти DNS сервера по вашему IP-адресу.
2436760	2440760	Давайте представим, вот как будто я использую прокси.
2440760	2443760	Мы берем наш IP-адрес,
2443760	2446760	вставляем его в DNS-чекер
2446760	2448760	и нажимаем кнопку Check.
2448760	2454760	После этого через некоторое время, обычно до 2-3 минут,
2454760	2458760	мы получим большой список DNS-серверов,
2458760	2461760	которые можно использовать с нашим IP-адресом.
2461760	2466760	Вот видите, в данном случае все прошло намного быстрее, чем 2-3 минуты.
2466760	2470760	Итак, вот мы сейчас представляем, что мы используем прокси,
2470760	2472760	и мы получили огромный список.
2472760	2475760	Список из IP-адресов.
2475760	2477760	Вот они.
2477760	2479760	Соответственно, 125 страниц.
2479760	2485760	125 страниц это примерно 12500 различных IP-адресов,
2485760	2487760	DNS-серверов, которые мы можем использовать.
2487760	2492760	Но проблема заключается в том, что далеко не все их мы можем использовать.
2492760	2495760	Поэтому, если вы начнете перебирать по одному серверу,
2495760	2497760	вы можете потратить время впустую.
2497760	2499760	Как сделать это правильно?
2499760	2501760	Мы нажимаем кнопку Копировать IP-адресы.
2502760	2504760	Нажимаем Копировать IP-адресы в буфер обмена.
2504760	2507760	И будут скопированы IP-адресы именно с той страницы, на которой вы находитесь.
2507760	2510760	Нажимаем Копировать эти IP-адресы.
2510760	2515760	И далее, все, что нам необходимо, это создать текстовый документ.
2515760	2521760	И в этом текстовом документе нам необходимо будет вставить наши IP-адреса.
2521760	2523760	Вот они.
2523760	2525760	Ровно 100 штук.
2525760	2531760	После чего, данный документ мы сохраним на рабочем столе,
2531760	2539760	и изменим его расширение с txt на расширение ini.
2539760	2542760	Итак, наш документ сохранен.
2542760	2548760	После этого мы воспользуемся бесплатной утилитой, созданной Стивом Гибсоном.
2548760	2551760	Называется утилита DNS Benchmark.
2551760	2555760	К сожалению, антивирусы могут на нее реагировать довольно плохо,
2555760	2559760	поэтому я рекомендую не переживать.
2559760	2561760	Данная утилита.
2561760	2563760	Возможно, вы захотите написать подобную утилиту.
2563760	2565760	Это, в принципе, не сложно.
2565760	2567760	Python всем в помощь.
2567760	2569760	Это не является большой проблемой.
2569760	2572760	Я буду использовать ее, как будто мы не умеем с вами программировать.
2572760	2574760	И самый простой вариант.
2574760	2579760	Данная утилита позволяет проверять DNS адреса.
2579760	2585760	Мы переходим на вкладку Name Servers и нажимаем на кнопку Add Remove.
2585760	2587760	Удаляем все Name Servers.
2587760	2588760	Удаляем все Name Servers.
2588760	2590760	Удаляем все Name Servers.
2590760	2592760	Полностью все удалили.
2592760	2598760	А теперь наша задача нажать на кнопку Add Any File Name Server.
2598760	2604760	У нас пошла загрузка и одновременно сразу же проверка наших DNS серверов.
2604760	2611760	И, что немаловажно, в данную проверку вы должны будете выполнять только тогда,
2611760	2613760	когда подключены к прокси.
2613760	2614760	Почему?
2614760	2616760	Потому что с вашего прокси коннект может быть доступен,
2616760	2618760	А с вашего прокси коннект может быть доступен,
2618760	2621760	а с другого IP-адреса другой страны коннекта может не быть.
2621760	2628760	И вот теперь ваша основная задача будет как небольшая домашняя работа.
2628760	2633760	Как будет вести себя трафик, когда мы будем проверять DNS сервера?
2633760	2640760	Он пойдет через DNS наш системный, либо же он пойдет через DNS Google,
2640760	2644760	и мы получим точно такую же проблему, про которую мы говорили ранее,
2644760	2647760	когда обращались к веб-ресурсу BrowserLeaks.
2647760	2651760	Это какой-то невероятный Red Flag с табличкой на лбу.
2651760	2655760	Вот подумайте самостоятельно и ответьте себе на этот вопрос.
2655760	2661760	Или как можно, например, сделать, чтобы правильно этот трафик пошел в момент нашей проверки.
2661760	2665760	Итак, смотрим, что мы получили в данном случае.
2665760	2670760	Из 100 серверов мы видим, что у нас есть сервера, которые подсвечены зеленым,
2670760	2672760	это сервера, которые работают.
2672760	2675760	Сервера, которые подсвечены, соответственно, красным,
2675760	2678760	это сервера, которые недоступны в нашем случае.
2678760	2681760	И мы можем сделать следующим образом.
2681760	2685760	Add remove и убрать 28 мертвых серверов.
2685760	2691760	То есть у нас было 100 серверов, 28 из них мертвые, значит 72 сервера живые.
2691760	2694760	Вы можете подключиться к любому из этих серверов
2694760	2701760	и, соответственно, использовать его в качестве DNS сервера для ваших прокси.
2701760	2703760	И это будет великолепный вариант,
2703760	2709760	с помощью которого вы не будете зависеть от Google и Cloudflare.
2709760	2710760	Это первое.
2710760	2713760	Второе, особенно если вы не находитесь ни на территории США,
2713760	2716760	потому что вот эти Red Flags, про которые я говорил,
2716760	2720760	они все характерны только для США.
2720760	2725760	Соответственно, если вы работаете, например, по Великобритании или каким-либо другим странам,
2725760	2727760	вам за это переживать не стоит.
2727760	2731760	Но стоит переживать, если вы будете использовать Public DNS,
2731760	2735760	потому что если вы будете использовать, например, работаете по Германии,
2735760	2737760	используете Google DNS,
2737760	2742760	то вы все равно получите Red Flag от Google по IP-адресу,
2742760	2748760	и, соответственно, Google сообщит в Meta, Microsoft и так далее, в другие компании,
2748760	2752760	что данный IP-адрес имеет бот-активность.
2752760	2756760	Поэтому самый лучший вариант – это использование веб-ресурса DetectExpert,
2756760	2758760	тем более чекер здесь бесплатный.
2758760	2760760	Использовать, опять же, бесплатный чекер DNS-блок,
2760760	2766760	который вы можете найти на сайте компании Gibson Research Corporation.
2766760	2771760	И таким образом вы сможете использовать огромное количество DNS-серверов.
2771760	2776760	Плюс ко всему, если вы используете, например, прокси фактически одного и того же провайдера,
2776760	2781760	то вы можете записать себе 1-2-3 этих сервера и не проводить в будущем проверку.
2781760	2785760	Если вы знаете, что вы, например, в том месте, где вы покупаете прокси,
2785760	2789760	там есть возможность выбора провайдера, сохранили себе один раз список,
2789760	2797760	и, в принципе, можете использовать один и даже тот же DNS необходимого вам провайдера,
2797760	2799760	и все будет окей.
2799760	2804760	Ну что ж, на этом мы переходим к нашей финальной части.
2804760	2813760	Финальная часть, которая позволяет веб-ресурсам определить, что вы используете прокси.
2813760	2819760	Я вам сейчас покажу очень интересную и очень сложную, на первый взгляд,
2819760	2820760	схему.
2820760	2821760	Вот она.
2821760	2826760	Что же в этой схеме такого сложного и почему она невероятно для нас важна?
2826760	2834760	Ну давайте представим себе, что это схема подключения, когда вы используете прокси SOX5.
2834760	2836760	Что происходит?
2836760	2838760	Итак, вот ваш компьютер.
2838760	2845760	На вашем компьютере вы не знаете, как установить правильный DNS.
2845760	2846760	Да?
2846760	2849760	И вы, например, не послушали мой урок.
2849760	2852760	И решили все-таки, да пошло оно все нахер.
2852760	2855760	Этот вектор ничего умного не скажет.
2855760	2859760	Я поставлю себе DNS 4 единицы, и мне будет на все насрать.
2859760	2860760	Окей.
2860760	2861760	Ваше право.
2861760	2864760	Как же, думает пользователь, пойдет трафик?
2864760	2866760	DNS работает с помощью UDP протокола.
2866760	2867760	Это мы знаем.
2867760	2872760	Нам даже сайт BrowserLeaks показывает наш реальный DNS, если мы используем SOX.
2872760	2878760	Поэтому, если мы поставим себе DNS 4 единицы, BrowserLeaks у нас покажет, что у нас используется Cloudflare,
2878760	2880760	и все будет хорошо.
2880760	2881760	Дело в шляпе.
2881760	2883760	По факту, да.
2883760	2885760	В теории.
2885760	2889760	Но в реальности это так не работает.
2889760	2896760	Когда вы поставите себе DNS 4 единицы, с помощью UDP протокола вы попадете на Cloudflare DNS.
2896760	2898760	Все окей, все классно.
2898760	2905760	Соответственно, с Cloudflare DNS вы можете загрузить необходимый вам веб-ресурс и воспользоваться UDP протоколом.
2905760	2907760	Никаких проблем нет.
2907760	2908760	Вообще.
2908760	2910760	В теории.
2910760	2916760	Но, по факту, ваш веб-ресурс может выполнить против вас сетевую атаку.
2916760	2921760	И при этом вы никогда не догадаетесь, что эта сетевая атака была выполнена.
2921760	2923760	Как работают сейчас веб-ресурсы?
2923760	2925760	Откройте уши.
2925760	2928760	Вот это атака топовая.
2928760	2933760	24 года, в 25 году ее начали применять еще чаще.
2933760	2935760	Веб-ресурс.
2935760	2940760	Не будет производить никаких атак против вас напрямую.
2940760	2948760	Но веб-ресурс будет иметь у себя определенный, например, iFrame какого-нибудь.
2948760	2953760	Или же какой-нибудь третисторонний веб-ресурс, всплывающее окно и так далее.
2953760	2955760	Иными словами, адвертайзинг.
2955760	2962760	Этот адвертайзинг будет иметь очень интересный домен.
2962760	2964760	То есть вот представьте себе, что у нас вот такой вот домен.
2964760	2973760	Ну, во-первых, в DNS Cloudflare не будет знать какой это домен, это понятное дело.
2973760	2980760	И то есть благодаря этому у веб-ресурса будет возможность определить ваш реальный DNS.
2980760	2981760	Это первое.
2981760	2985760	То есть в данном случае определится Cloudflare точно так же по аналогии с BrowserLeaks.
2985760	2987760	Ну и что в этом может быть такого, правда?
2987760	2989760	Ничего страшного.
2989760	2993760	Но на самом деле, помимо сложного домена,
2993760	2995760	есть еще...
2995760	2997760	Вот такой домен у нас будет, да?
2997760	3000760	Есть еще и сложный ответ.
3000760	3003760	А теперь немного магии.
3003760	3009760	Некоторые сетевики скажут, что это невозможно, но я рекомендую попробовать это все на практике.
3009760	3017760	Дело в том, что ваш DNS может работать как в UDP-запросе, так и в TCP-запросе.
3017760	3020760	То есть он может использовать и тот, и другой протокол.
3020760	3022760	И на TCP...
3022760	3026760	Его можно переключить искусственно.
3026760	3030760	А каким образом его можно переключить искусственно на TCP?
3030760	3037760	Если общение по UDP выходит за рамки протокола UDP.
3037760	3044760	Иными словами, UDP может обрабатывать простые запросы, но сложные запросы будет обрабатывать всегда TCP-протокол.
3044760	3048760	А соответственно, вот этот вот Advertising
3048760	3050760	может использовать...
3050760	3055760	Сложный DNS-ответ.
3055760	3058760	Сложную DNS-коммуникацию.
3058760	3066760	И таким образом инициировать подключение не по UDP-протоколу, а по TCP-протоколу.
3066760	3072760	А в данном случае, когда будет инициировано подключение по TCP-протоколу,
3072760	3077760	есть практически 90% шанса,
3077760	3080760	что будет показан DNS-протокол.
3080760	3083760	Вашего проксика.
3083760	3086760	То есть даже не ваш реальный DNS вашего провайдера,
3086760	3089760	а всего-навсего DNS-прокси.
3089760	3091760	Это страшно, как вы думаете?
3091760	3093760	Да, это страшно.
3093760	3095760	А страшно это потому, что
3095760	3097760	в UDP-запросе,
3097760	3099760	вот в этом UDP-запросе,
3099760	3101760	вот он,
3101760	3103760	вот эта система,
3103760	3106760	она получит IP-адрес UDP.
3106760	3108760	То есть в данном случае 4 единицы.
3108760	3110760	А при TCP-запросе,
3110760	3113760	она получит IP-адрес вашего сокса.
3113760	3115760	DNS вашего сокса.
3115760	3117760	Потому что трафик будет идти через него.
3117760	3121760	И соответственно, что мы получаем в сухом остатке?
3121760	3126760	В сухом остатке этот malware advertising
3126760	3128760	получит два разных IP-адреса.
3128760	3132760	IP-адрес DNS-протокола и IP-адрес TCP-протокола.
3132760	3136760	IP-адрес UDP-DNS и IP-адрес TCP-DNS.
3136760	3139760	И в том случае, если эти IP-адреса не будут совпадать,
3139760	3143760	значит используется система проксификации.
3143760	3145760	Увы и факт.
3145760	3147760	Дело в том, что
3147760	3149760	нередко можно встретить это на практике.
3149760	3151760	Почему вот я упомянул,
3151760	3153760	что некоторые сетевики могут
3153760	3155760	начать на меня матюкаться и назвать это бредом.
3155760	3157760	Дело в том, что
3157760	3159760	если ваши DNS-запросы обрабатываются
3159760	3161760	с помощью вашего
3161760	3163760	системного резольвера,
3163760	3165760	то ему будет плевать,
3165760	3167760	хоть то TCP, хоть то UDP.
3167760	3169760	И фактически, если выставлен настройка,
3169760	3171760	как DNS 4 единицы,
3171760	3173760	то он и будет использовать эти 4 единицы
3173760	3175760	хоть по TCP-протоколу, хоть по UDP-протоколу.
3175760	3177760	Но так в теории.
3177760	3179760	А по практике
3179760	3181760	ваше программное обеспечение,
3181760	3183760	ваши проксификаторы
3183760	3185760	могут блокировать TCP-протокол
3185760	3187760	для того,
3187760	3189760	чтобы не было утечки IP-адреса.
3189760	3191760	И в таком случае
3191760	3193760	TCP-запрос будет обработан
3193760	3195760	непосредственно через TCP-протокол,
3195760	3197760	поскольку
3197760	3199760	в системном резольвере он будет заблокирован,
3199760	3201760	и поэтому он пойдет
3201760	3203760	через проксификатор.
3203760	3205760	А, соответственно, Malware Advertising
3205760	3207760	сможет получить
3207760	3209760	два разных IP-адреса,
3209760	3211760	что является неконсистентным
3211760	3213760	и является DNS-аномалией,
3213760	3215760	о которой мы говорили
3215760	3217760	в пункте номер 6.
3217760	3219760	И таким образом
3219760	3221760	есть возможность определить,
3221760	3223760	что используется система проксификации.
3223760	3225760	На этом можно сказать,
3225760	3227760	что вас вычислили.
3227760	3229760	Да, конечно,
3229760	3231760	нет возможности определить
3231760	3233760	вашу реальную геопозицию таким образом.
3233760	3235760	Можно определить другим образом,
3235760	3237760	например, с помощью CDN-сетей.
3237760	3239760	Но данный веб-ресурс
3239760	3241760	снимает с себя ответственность GDPR,
3241760	3243760	он не производит никаких сетевых атак
3243760	3245760	и так далее.
3245760	3247760	А по факту даже сетевой атакой
3247760	3249760	назвать это невозможно,
3249760	3251760	потому что сканирование портов не происходит,
3251760	3253760	каких-либо методик сложных
3253760	3255760	не используется.
3255760	3257760	Просто сложное доменное имя
3257760	3259760	и используется сложный
3259760	3261760	DNS-запрос-ответ.
3261760	3263760	После этого,
3263760	3265760	после вот такой элементарно простой
3265760	3267760	организованной атаки
3267760	3269760	использование SOCKS5 или SOCKS4
3269760	3271760	к сожалению является видным.
3271760	3273760	Так что помните об этом,
3273760	3275760	не забывайте,
3275760	3277760	и если есть возможность использовать
3277760	3279760	какой-либо вид прокси,
3279760	3281760	где есть возможность полносистемного подключения
3281760	3283760	либо же виртуальные роутеры,
3283760	3285760	конечно же используйте это,
3285760	3287760	потому что в некоторых антидетектах
3287760	3289760	он касается в первую очередь
3289760	3291760	производителей антидетектов,
3291760	3293760	браузерных антидетектов,
3293760	3295760	потому что они
3295760	3297760	непосредственно больше всего уязвимы к этому.
3297760	3299760	И знаете по какой причине?
3299760	3301760	Дело в том, что вот точно так же,
3301760	3303760	как по аналогии с программным обеспечением
3303760	3305760	Proxyfire,
3305760	3307760	где есть возможность проксифицировать DNS-запросы,
3307760	3309760	точно так же в некоторых антидетектах
3309760	3311760	используется система похожая
3311760	3313760	и соответственно есть возможность
3313760	3315760	вычислить, когда пользователи
3315760	3317760	используют прокси,
3317760	3319760	поскольку антидетект браузера
3319760	3321760	не поддерживает UDP-протокол,
3321760	3323760	и соответственно UDP-протокол у вас пойдет
3323760	3325760	с системного резольвера,
3325760	3327760	а TCP-запросы пойдут уже через
3327760	3329760	непосредственно сам антидетект браузер,
3329760	3331760	где будет выявлено два разных IP-адреса,
3331760	3333760	что будет являться свидетельством того,
3333760	3335760	что пользователь использует прокси.
3335760	3337760	Большое спасибо за внимание,
3337760	3339760	с вами был VectorT13,
3339760	3341760	до встречи в следующем уроке!
